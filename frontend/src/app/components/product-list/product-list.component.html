<section class="container py-4">

  <!-- En-tÃªte -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h4 mb-0">ðŸ“¦ Produits</h1>
    <a routerLink="/products/new" class="btn btn-success d-flex align-items-center" role="button">
      <i class="bi bi-plus-circle-fill me-2"></i> Nouveau produit
    </a>
  </div>

  <!-- Table des produits -->
  <div class="card shadow-sm">
    <div class="card-body p-0">
      <table class="table table-hover mb-0 align-middle">
        <thead class="table-primary">
        <tr>
          <th>Nom</th>
          <th>Marque</th>
          <th>Prix</th>
          <th>Image</th>
          <th>CatÃ©gorie</th>
          <th class="text-end">Actions</th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let p of products">
          <td>{{ p.name }}</td>
          <td>{{ p.brandName }}</td>
          <td>{{ p.price | currency:'EUR' }}</td>
          <td>
            <img [src]="p.imageUrl || 'assets/no-image.png'"
                 (error)="onImageError($event)"
                 alt="Image produit" width="60"
                 class="rounded shadow-sm border" />
          </td>
          <!--  Affichage catÃ©gorie -->
          <td>{{ p.category?.name || 'Aucune catÃ©gorie' }}</td>

          <td class="text-end">
            <button class="btn btn-primary btn-sm me-2" (click)="editProduct(p.id!)">
              <i class="bi bi-pencil-fill"></i> Modifier
            </button>
            <button class="btn btn-danger btn-sm" (click)="deleteProduct(p.id!)">
              <i class="bi bi-trash-fill"></i> Supprimer
            </button>
          </td>
        </tr>

        <!--  Message si aucun produit -->
        <tr *ngIf="products.length === 0">
          <td colspan="7" class="text-center text-muted py-3">
            Aucun produit disponible.
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
